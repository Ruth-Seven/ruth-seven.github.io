---
title: 833.字符串中的查找与替换
thumbnail: 'http://static.come2rss.xyz/尼尔机械.jpg'
toc: true
top: 10
categories:
date: 2020-08-07 14:11:15
tags:
---


<!-- more -->

中等题

这题坑还是很多的，如输入数据非有序，考虑在同一字符串插入时多个字符串替换时原字符串的下标维持或是可插入性。

**思路1:**

将indexes所标记出的下标映射为输入数据的次序，在排序indexes来有序遍历S。之后就是判断哪些S的字母可以替换并替换。

**思路2（官方）：**

为了顺序地构造目标字符串，先标记出S中所有可替换的位置，并顺序遍历（逆序或者正序都可以，构造方法不同罢了）。



依据题意，可以推出从后向前替换，可以避免下标变换的问题。

```
class Solution {
public:
    //题目没看清,多写了一个转化大小写函数
    string lowercase(string S){
        // return A iterator;
        std::transform(S.begin(), S.end(), S.begin(), [](unsigned char c){return std::tolower(c);} );
        return S;
    }
    //思路1 
    string findReplaceString(string S, vector<int>& indexes, vector<string>& sources, vector<string>& targets) {
        int idx2 = indexes.size() - 1;
        vector<int> repl( indexes.size() );
        //将排序后的字符串下标映射回原来的下标
            //同时不能 把排序后的index下标映射或者被映射;
        map<int, int> match;        
        for(int i=0;i<indexes.size();i++) 
            match[ indexes[i] ] = i;
        sort(indexes.begin(), indexes.end());
        //判断逆序判断能否替换，若可以则逆序替换；  
        //逆序替换不影响之前的可替换性判断
        for(int i=S.size()-1;i>=0 && idx2 >=0 ;i--){
            if(i == indexes[idx2]){
                if(lowercase( S.substr(i, sources[match[i]].size())) == sources[match[i]] )                
                    S.replace(i, sources[match[i]].size(), targets[match[i]]);    
                idx2 --;                
            }
        }

        return S;
    }
    
    // 思路2：官方解的实现，也是空间换时间
    string findReplaceString(string S, vector<int>& indexes, vector<string>& sources, vector<string>& targets) {
        //对S每个字母对有效替换的判断, 并记录下标
        vector<int> match(S.size(), -1);
        for(int i=0 ;i<indexes.size();i++){
            if( S.substr(indexes[i], sources[i].size()) == sources[i])
                match[ indexes[i] ] = i;
        }

        //判断逆序判断能否替换，若可以则逆序替换；          
        for(int i=S.size()-1;i>=0 ;i--){
            if(match[i] != -1){
                S.replace(i, sources[match[i]].size(), targets[match[i]] );
            }
            cout<< S << endl;
        }

        return S;
    }
    
};
```