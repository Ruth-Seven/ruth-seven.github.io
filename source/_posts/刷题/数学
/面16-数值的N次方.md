---
title: 面16-数值的N次方
thumbnail: 'http://static.come2rss.xyz/尼尔机械.jpg'
toc: true
top: 10
categories:
date: 2020-08-07 13:26:33
tags:
---



### 题面：

给一个浮点数，求出其数值的整数次方。

### 思路：

主要考点还是在异常处理这方面。由于幂为整数，在效率上可以考虑快速幂。

<!-- more -->



### 代码：

```
int power(double base, int exponent){
    //无穷大的非法计算值
    if( equal(base, 0.0) && exponent < 0) 
        throw new exception("Invalid parameters.");
    
    unsigned int posExponent = (unsigned int)exponent;
    double mulBase = base, mulRes = 1;
    while(posExponent > 0){
        if(posExponent & 1)
            mulRes *= mulBase;
        mulBase *= mulBase;
        posExponent = posExponent >> 1;
    }
   if(exponent < 0) mulRes = 1 / mulRes;
   return mulRes;
}
```

可能降低耦合更好一点

```
double PowerWithUnsighedExponent(double base, unsigned int exponent){
    //特判：基数为0；指数为0无需特判
    if( equla(base, 0.0)) return 0.0;
    double mulRes = 1;
    while(exponent > 0){
        if(exponent & 1)
            mulRes *= mulBase;
        mulBase *= mulBase;
        exponent = exponent >> 1;
    }
   return mulRes;
}
int power(double base, int exponent){
    //无穷大的非法计算值
    if( equal(base, 0.0) && exponent < 0) 
        throw new exception("Invalid parameters.");
    
    double mulRes = PowerWithUnsignedExponent(base, exponent);
    if(exponent < 0) mulRes = 1 / mulRes;
   return mulRes;
}
```